<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">

    <CustomAction
        Location="CommandUI.Ribbon"
        Id="Ribbon.List.Settings.Controls.SPEasyForms.Action"
        RegistrationType="ContentType"
        RegistrationId="0x01"
        Sequence="10256"
        Rights="ManageLists"
    >

        <CommandUIExtension>
            <CommandUIDefinitions>

                <CommandUIDefinition  Location="Ribbon.List.Settings.Controls._children">
                    <Button
                        LabelText="SPEasyForms"
                        Alt="SPEasyForms Settings"
                        ToolTipTitle="SPEasyForms Settings"
                        ToolTipDescription="Settings page for configuring this list for SPEasyForms."
                        Id="Ribbon.List.Settings.Controls.SPEasyForms.Button"
                        Command="Ribbon.List.Settings.Controls.SPEasyForms.Command"
                        Image32by32="/_layouts/images/textbox.gif"
                        Image16by16="/_layouts/images/itemevent.gif"
                        Sequence="10256"
                        TemplateAlias="o1"
                      />
                </CommandUIDefinition>

                <CommandUIDefinition  Location="Ribbon.Library.Settings.Controls._children">
                    <Button
                        LabelText="SPEasyForms"
                        Alt="SPEasyForms Settings"
                        ToolTipTitle="SPEasyForms Settings"
                        ToolTipDescription="Settings page for configuring this list for SPEasyForms."
                        Id="Ribbon.List.Settings.Controls.SPEasyForms.Button"
                        Command="Ribbon.List.Settings.Controls.SPEasyForms.Command"
                        Image32by32="/_layouts/images/textbox.gif"
                        Image16by16="/_layouts/images/itemevent.gif"
                        Sequence="10256"
                        TemplateAlias="o1"
                      />
                </CommandUIDefinition>

                <CommandUIDefinition  Location="Ribbon.Calendar.Calendar.Settings.Controls._children">
                    <Button
                        LabelText="SPEasyForms"
                        Alt="SPEasyForms Settings"
                        ToolTipTitle="SPEasyForms Settings"
                        ToolTipDescription="Settings page for configuring this list for SPEasyForms."
                        Id="Ribbon.List.Settings.Controls.SPEasyForms.Button"
                        Command="Ribbon.List.Settings.Controls.SPEasyForms.Command"
                        Image32by32="/_layouts/images/textbox.gif"
                        Image16by16="/_layouts/images/itemevent.gif"
                        Sequence="10256"
                        TemplateAlias="o1"
                      />
                </CommandUIDefinition>

            </CommandUIDefinitions>

            <!-- don't add server relative site url if we're in the root site collection -->
            <CommandUIHandlers>
                <CommandUIHandler
                    Command="Ribbon.List.Settings.Controls.SPEasyForms.Command"
                    CommandAction="javascript:window.location=(_spPageContextInfo.siteServerRelativeUrl != '/' ? _spPageContextInfo.siteServerRelativeUrl : '') + '/Style Library/SPEasyFormsAssets/2014.01.o/Pages/SPEasyFormsSettings.aspx?ListId={ListId}&amp;SiteUrl={SiteUrl}&amp;Source=' + encodeURIComponent(window.location.href)"
                    EnabledScript="javascript:shouldSPEasyFormsRibbonButtonBeEnabled();"
                 />
            </CommandUIHandlers>

        </CommandUIExtension>

    </CustomAction>

</Elements>